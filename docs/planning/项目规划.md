《不可见莺（The Invisible Warbler）》三维交互艺术网页 —— 项目规划 【新版】

================================================================================

一、项目现状与核心理念
以"观鸟"为隐喻，通过网页3D交互、GLB模型组件拼贴与动态鸟类生态模拟，探讨艺术碎片、生成机制与生态平衡的艺术命题。

用户在抽象森林场景中扮演"观察者"，体验由GLB模型组件组合而成的鸟类生态系统，观察不同性格鸟类的行为模式，感受算法生成的生命活力。

二、已实现核心功能

阶段 1：抽象森林生态场景 ✅ 已完成
- 使用线条和点云构建抽象树木（直线、斜线、折线树干 + 分层点云树冠）
- 程序化生成15棵随机分布的树木
- 动态光照和雾效营造森林氛围
- 轨道控制器实现自由观察视角

阶段 2：GLB模型组件系统 ✅ 已完成
- 支持从public/models/bird_components/文件夹加载GLB部件
- 自动扫描head/、chest/、belly/、wing/、tail/、foot/子文件夹
- 动态组件库管理，支持随机组合生成鸟类

阶段 3：动态鸟类生态系统 ✅ 已完成
- 四种鸟类性格：观察者(Observer)、巡逻者(Patrol)、旅行者(Traveler)、活跃者(Active)
- 三种飞行行为：悬停(Hover)、巡逻(Patrol)、穿梭(Travel)
- 每5秒生成1-3只鸟类，最大5只同时存在
- 每只鸟40秒生命周期（含10秒淡入淡出过渡），自动清理
- 性格-based行为权重系统，3-10秒随机切换行为
- 平滑飞行路径，弧形穿梭轨迹
- **生命周期视觉效果**：5秒淡入缓出动画出现，5秒淡出缓出动画消失

阶段 4：实时监控与统计 ✅ 已完成
- UI控制面板：鸟类定位模式切换（中心/树上）
- 实时统计面板：显示树木、部件、三种鸟类性格数量
- 控制台调试信息输出

阶段 4.5：鸟类组件贴合度优化 ✅ 已完成
- 翅膀定位优化：X轴偏移从±2.0调整为±1.7，增加0.3m贴合度
- 足部定位优化：X轴偏移从±0.8调整为±0.5，增加0.3m贴合度
- 基于包围盒的动态对齐算法，确保部件与躯干紧密贴合

阶段 5：长按选取与胶卷系统 ✅ 已完成
- 长按选取机制：1.8秒长按鸟类组合体显示顺时针进度环
- 智能取消：鼠标移动超过8px自动取消，避免误操作
- 视觉反馈：捕获成功后鸟类闪烁发光确认
- 胶卷UI：右下角显示数量（最多10个），点击打开画廊
- 缩略图系统：离屏渲染生成256x256高质量缩略图
- 超级组合体展示：所有捕获部件重组为统一大尺寸展示
- **智能混合策略布局**：head分布、chest螺旋、belly螺旋、尾部级联、翅膀螺旋、足部对称堆叠
- Session存储：内存存储，不持久化到本地
- 资源管理：自动清理预览对象，防止内存泄漏

阶段 6：专业展示页面系统 ✅ 已完成
- MatCap材质渲染：使用matcap-porcelain-white材质球提供陶瓷质感
- 智能材质转换：自动将所有模型材质转换为MeshMatcapMaterial
- 属性保持迁移：保留原有颜色、贴图和法线贴图属性
- **白盒子展示空间**：开前面纯白色摄影棚工作室（5面：地面、后墙、左右墙、天花板）
- 柔和分层照明：环境光0.4、主关键光0.8、半球填充光0.15
- 软阴影渲染：PCF软阴影，支持模型投射和接收阴影
- ACES Tone Mapping：电影级色彩映射和曝光控制
- 交互控制：OrbitControls支持旋转、缩放，隐藏坐标轴
- **响应式布局优化**：展示页面占90%屏幕尺寸，移除尺寸硬限制
- **UI层级管理**：Clear Film按钮绝对定位，z-index层级确保显示优先级
- **超级组合体豁免机制**：展示鸟类组件不受淡入淡出和寿命限制，立即完全可见

阶段 6.5：加载体验优化 ✅ 已完成
- **居中加载覆盖层**：全屏半透明黑色背景，居中显示英文提示
- **动态点点动画**：经典的"Loading models..." + 循环点点动画效果
- **智能显示时机**：init()开始时显示，模型加载完成后自动隐藏
- **错误处理机制**：加载失败时显示友好提示，45秒超时保护
- **异步集成**：完美集成现有的async/await模型加载流程

阶段 6.6：Windows启动器优化 ✅ 已完成
- **Invisible_Warbler.bat**：专为Windows用户设计的一键启动批处理文件
- **自动化流程**：双击即启动，利用webpack-dev-server自动打开浏览器
- **重复打开修复**：解决webpack自动打开与手动打开的冲突问题
- **智能等待机制**：3秒等待时间确保服务器完全启动
- **用户友好界面**：清晰的启动信息和状态提示
- **容错设计**：提供手动启动的备选方案和故障排除指南

阶段 6.7：文档国际化优化 ✅ 已完成
- **README.md双语化**：建立完整的双语文档结构，英文在前，中文在后
- **LAUNCH_README.md英文化**：启动器说明文档完整转换为英文版本
- **国际化用户体验**：打破语言障碍，支持中英文双语用户群体
- **内容完整性保证**：确保两个语言版本的信息对等性和功能完整性

阶段 6.8：场景测试文件优化 ✅ 已完成
- **indexscenetest.js瘦身**：全面移除鸟类生成、模型加载、交互系统等功能
- **纯场景展示**：保留森林环境、HDR照明、光照雾效等核心场景元素
- **代码精简**：从4000+行优化到约700行，专注场景渲染性能
- **功能分离**：与完整项目文件区分，便于独立场景测试和调试

阶段 6.9：UI系统全面优化 ✅ 已完成
- **音量控制UI精简**：移除视觉干扰元素，只保留功能性音量条和静音按钮
- **智能静音逻辑**：按钮图标基于实际音量状态动态显示（🔊/🔇）
- **胶卷阈值优化**：预览激活条件从3个组件降低到1个，提升交互流畅性
- **音乐播放时机**：场景加载完成后播放，避免加载时的音频干扰

阶段 7.0：场景渲染与交互增强 ✅ 已完成
- **亮度整体提升**：主场景光照强度统一+0.1，提供更舒适的视觉体验
- **预览页面交互**：启用右键拖拽功能，支持上下左右屏幕移动
- **操作说明完善**：明确标注各种鼠标控制方式，提升用户友好性

三、核心技术架构

抽象森林系统：
- 树干生成：直线/波形/折线几何体，使用LineBasicMaterial
- 树冠生成：分层点云系统，颜色渐变和透明度变化
- 树枝生成：直线/斜线/折线组合，粗细变化模拟

GLB组件系统：
- GLBLoader异步加载和缓存
- 模型预处理：材质转换、居中、阴影设置
- 组件库管理：文件夹扫描，动态部件发现
- 组合生成：随机从可用部件中选择组装
- **定位算法优化**：包围盒对齐系统
  - 胸部作为基准中心点
  - 其他部件基于包围盒尺寸动态定位
  - 可调节贴合度参数（翅膀±1.7m，足部±0.5m）

鸟类生态系统：
- FlyingBird类：封装鸟类状态、性格、行为
- 行为状态机：hover/patrol/travel状态切换
- 路径计算：悬停位置、环形巡逻、弧形穿梭
- 生命周期管理：自动生成、老化、清理

交互控制系统：
- OrbitControls：3D场景导航
- UI面板：模式切换和统计显示
- 响应式设计：窗口大小适配
- 长按选取系统：3秒进度环，智能取消阈值
- 胶卷收集系统：Session存储，缩略图生成，模态画廊预览

四、技术栈与性能优化

核心技术：
- Three.js：3D渲染引擎，WebGL后端
- GLB/GLTF：3D模型格式，组件化存储
- ES6 Modules：现代JavaScript模块系统
- Webpack：打包和开发服务器

性能优化：
- 模型缓存：GLB加载结果缓存复用
- 实例限制：最大5只动态鸟类
- 几何简化：线条和点云替代复杂几何体
- 内存管理：自动清理过期鸟类对象

五、项目特色与创新点

1. 抽象美学：线条树木 + 点云树冠的极简抽象风格
2. 性格系统：鸟类具有不同性格，行为丰富多样
3. 生态平衡：自动生成与清理维持场景活力
4. 组件化架构：GLB部件自由组合，易于扩展
5. 实时监控：详细的统计数据和调试信息

六、未来扩展方向

阶段 5：用户交互增强（规划中）
- 鼠标点击鸟类进行观察和收集
- 碎片胶卷系统，收集鸟类部件
- AI风格分析模块，分析组合结果的艺术特征

阶段 6：作品保存与图鉴（规划中）
- 图鉴页面：展示收集的鸟类组合
- 本地存储：保存作品到浏览器存储
- 导出功能：保存为图片或3D模型

阶段 7：美术优化与体验提升（规划中）
- 更多树木类型和鸟类部件
- 音效系统，森林氛围音效
- 移动端适配和触摸控制
- 性能优化，支持更多同时鸟类

阶段 8：云端功能与AI集成（远期规划）
- 云端作品分享和社区功能
- AI生成新部件和组合建议
- 多用户协作观察模式

七、开发反思与技术选型

优势：
- 模块化设计：各系统独立，易于维护和扩展
- 性能友好：抽象几何体+实例限制，保证流畅运行
- 艺术性强：抽象森林+性格鸟类，视觉和交互都有趣
- 技术成熟：基于Three.js，生态完善，易于部署

技术决策：
- 抽象vs写实：选择抽象风格，更符合艺术项目定位
- 组件vs程序化：GLB组件系统，更灵活的组合可能性
- 性格vs随机：性格系统让鸟类行为更有生命力
- 缓存vs实时：模型缓存平衡加载速度和内存使用

八、总结

当前版本实现了：
✅ 抽象森林生态场景构建
✅ GLB模型组件化系统
✅ 动态鸟类性格生态系统
✅ 实时监控和统计功能
✅ 鸟类组件贴合度优化
✅ 长按选取与胶卷收集系统

核心在于：
场景氛围营造 + 组件化鸟类生成 + 性格驱动的行为生态 + 实时反馈系统

项目已具备完整的交互艺术体验基础，为后续的用户收集、AI分析、作品保存等功能奠定了坚实的技术架构。