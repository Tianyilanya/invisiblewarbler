# é¡¹ç›®å¼€å‘æ—¥å¿— - 2025-11-17

## ğŸ“‹ ä»Šæ—¥æ”¹åŠ¨æ€»ç»“

### æ–°å¢æ–‡ä»¶
- `src/modules/groundRingModel.js` - åœ°é¢åœ†ç¯æ¨¡å‹ç®¡ç†æ¨¡å—

### ä¿®æ”¹æ–‡ä»¶
- `src/index.js` - é‡æ„åœ°é¢åœ†ç¯é€»è¾‘ï¼Œä½¿ç”¨æ–°æ¨¡å—
- `public/models/README.md` - æ·»åŠ åœ°é¢åœ†ç¯æ¨¡å‹ä½¿ç”¨è¯´æ˜

### æ”¹åŠ¨å†…å®¹
å°†åœ°é¢åœ†ç¯çš„é…ç½®å’ŒåŠ è½½é€»è¾‘ä» `src/index.js` ä¸­æå–å‡ºæ¥ï¼Œåˆ›å»ºç‹¬ç«‹çš„æ¨¡å— `groundRingModel.js`ï¼Œä½¿ä»£ç ç»“æ„æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ã€‚

---

## ğŸ—ï¸ é¡¹ç›®æ¡†æ¶ç»“æ„

### å…¥å£æ–‡ä»¶
- **HTMLå…¥å£**: `public/index.html`
  - åŒ…å«ä¸€ä¸ª `<div id="root"></div>` å®¹å™¨
  - ç”± `src/index.js` æŒ‚è½½ Three.js æ¸²æŸ“å™¨

- **ä¸»å…¥å£**: `src/index.js`
  - åˆå§‹åŒ– Three.js åœºæ™¯ã€æ‘„åƒæœºã€æ¸²æŸ“å™¨
  - å¯¼å…¥å¹¶è°ƒç”¨å„ä¸ªåŠŸèƒ½æ¨¡å—
  - å¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆé”®ç›˜ã€é¼ æ ‡ï¼‰
  - ç®¡ç†åŠ¨ç”»å¾ªç¯

### æ¨¡å—ç»“æ„ (`src/modules/`)

#### 1. `jungleScene.js` - ä¸›æ—åœºæ™¯ç”Ÿæˆæ¨¡å—
**åŠŸèƒ½**: ç”Ÿæˆä¸›æ—åœºæ™¯ï¼ŒåŒ…æ‹¬çŒæœ¨ä¸›å’Œæ‚ç‰©å †

**å¯¼å‡ºå‡½æ•°**:
- `createJungleSceneGroup(options)` - åˆ›å»ºä¸›æ—åœºæ™¯ç»„

**è°ƒç”¨å…³ç³»**:
- è¢« `src/index.js` è°ƒç”¨
- å†…éƒ¨è°ƒç”¨ `pointCloudShader.js` çš„ `meshToPointCloud()` å‡½æ•°
- å†…éƒ¨ä½¿ç”¨ `loadModel()` åŠ è½½æ¨¡å‹ï¼ˆç›®å‰ä½¿ç”¨éšæœºç«‹æ–¹ä½“å ä½ï¼‰

**æ¨¡å‹æ–‡ä»¶ä½ç½®**:
- æ¨¡å‹æ–‡ä»¶åº”æ”¾åœ¨ `public/models/` ç›®å½•ä¸‹
- æ”¯æŒ OBJ æ ¼å¼ï¼ˆå¾…å®ç°ï¼‰
- é…ç½®æ–¹å¼ï¼šåœ¨ `src/index.js` ä¸­é€šè¿‡ `modelPaths` å‚æ•°ä¼ å…¥æ¨¡å‹è·¯å¾„æ•°ç»„

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
const jungle = createJungleSceneGroup({
  usePointCloud: false,
  clusterCount: 25,
  modelPaths: ['models/debris1.obj', 'models/debris2.obj'],
  modelsFolder: 'models/',
  innerRadius: INNER_RADIUS / 5,
  outerRadius: OUTER_RADIUS / 5
});
```

---

#### 2. `randomBird.js` - éšæœºé¸Ÿç±»ç”Ÿæˆæ¨¡å—
**åŠŸèƒ½**: ç”Ÿæˆéšæœºå½¢çŠ¶çš„ä¼ªé¸Ÿç”Ÿç‰©

**å¯¼å‡ºå‡½æ•°**:
- `createRandomBird(options)` - åˆ›å»ºéšæœºé¸Ÿç±»å¯¹è±¡

**è°ƒç”¨å…³ç³»**:
- è¢« `src/index.js` è°ƒç”¨
- å†…éƒ¨è°ƒç”¨ `pointCloudShader.js` çš„ `createPointCloudSkin()` å‡½æ•°

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
const bird = createRandomBird({
  usePointCloudSkin: true
});
```

---

#### 3. `pointCloudShader.js` - ç‚¹äº‘ç€è‰²å™¨æ¨¡å—
**åŠŸèƒ½**: æä¾›ç‚¹äº‘æ¸²æŸ“ç›¸å…³çš„ç€è‰²å™¨å’Œå·¥å…·å‡½æ•°

**å¯¼å‡ºå‡½æ•°**:
- `meshToPointCloud(mesh, options)` - å°†ç½‘æ ¼è½¬æ¢ä¸ºç‚¹äº‘
- `createPointCloudSkin(group, options)` - ä¸ºå¯¹è±¡ç»„åˆ›å»ºç‚¹äº‘è’™çš®
- `updatePointCloudTime(pointCloud, time)` - æ›´æ–°ç‚¹äº‘æ—¶é—´å‚æ•°ï¼ˆç”¨äºåŠ¨ç”»ï¼‰

**è°ƒç”¨å…³ç³»**:
- è¢« `jungleScene.js` è°ƒç”¨ï¼ˆ`meshToPointCloud`ï¼‰
- è¢« `randomBird.js` è°ƒç”¨ï¼ˆ`createPointCloudSkin`ï¼‰
- è¢« `src/index.js` è°ƒç”¨ï¼ˆ`updatePointCloudTime`ï¼Œåœ¨åŠ¨ç”»å¾ªç¯ä¸­ï¼‰

---

#### 4. `groundRingModel.js` - åœ°é¢åœ†ç¯æ¨¡å‹æ¨¡å— â­ ä»Šæ—¥æ–°å¢
**åŠŸèƒ½**: ç®¡ç†åœ°é¢åœ†ç¯çš„è‡ªå®šä¹‰æ¨¡å‹åŠ è½½å’Œé…ç½®

**å¯¼å‡ºå‡½æ•°**:
- `createGroundRingConfig(options)` - åˆ›å»ºåœ°é¢åœ†ç¯é…ç½®å¯¹è±¡
- `addGroundRingModel(scene, config)` - å°†åœ†ç¯æ¨¡å‹æ·»åŠ åˆ°åœºæ™¯
- `loadGroundRingModel(modelPath, options)` - ä»æ–‡ä»¶åŠ è½½åœ†ç¯æ¨¡å‹ï¼ˆå¾…å®ç°ï¼‰

**è°ƒç”¨å…³ç³»**:
- è¢« `src/index.js` è°ƒç”¨

**æ¨¡å‹æ–‡ä»¶ä½ç½®**:
- æ¨¡å‹æ–‡ä»¶åº”æ”¾åœ¨ `public/models/` ç›®å½•ä¸‹
- æ”¯æŒå¤šç§æ ¼å¼ï¼ˆOBJã€GLTF ç­‰ï¼Œå¾…å®ç°ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// æ–¹å¼1: ç›´æ¥ä¼ å…¥ THREE.Object3D
const groundRingConfig = createGroundRingConfig({
  customModel: yourCustomModel,
  innerRadius: INNER_RADIUS,
  outerRadius: OUTER_RADIUS
});

// æ–¹å¼2: åˆ†åˆ«æä¾›å†…åœ†å’Œå¤–åœ†
const groundRingConfig = createGroundRingConfig({
  customModel: {
    innerRing: innerRingModel,
    outerRing: outerRingModel
  },
  innerRadius: INNER_RADIUS,
  outerRadius: OUTER_RADIUS
});

addGroundRingModel(scene, groundRingConfig);
```

---

## ğŸ“ æ–‡ä»¶ç›®å½•ç»“æ„

```
Invisible-Warbler/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html              # HTML å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ models/                 # æ¨¡å‹æ–‡ä»¶ç›®å½•
â”‚       â”œâ”€â”€ README.md           # æ¨¡å‹ä½¿ç”¨è¯´æ˜æ–‡æ¡£
â”‚       â”œâ”€â”€ debris1.obj         # æ‚ç‰©æ¨¡å‹ï¼ˆç¤ºä¾‹ï¼‰
â”‚       â”œâ”€â”€ debris2.obj         # æ‚ç‰©æ¨¡å‹ï¼ˆç¤ºä¾‹ï¼‰
â”‚       â””â”€â”€ ...                 # å…¶ä»–æ¨¡å‹æ–‡ä»¶
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js                # ä¸»å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ modules/                # åŠŸèƒ½æ¨¡å—ç›®å½•
â”‚       â”œâ”€â”€ jungleScene.js      # ä¸›æ—åœºæ™¯ç”Ÿæˆ
â”‚       â”œâ”€â”€ randomBird.js       # éšæœºé¸Ÿç±»ç”Ÿæˆ
â”‚       â”œâ”€â”€ pointCloudShader.js # ç‚¹äº‘ç€è‰²å™¨
â”‚       â””â”€â”€ groundRingModel.js  # åœ°é¢åœ†ç¯æ¨¡å‹ â­ ä»Šæ—¥æ–°å¢
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ POINT_CLOUD_SHADER.md   # ç‚¹äº‘ç€è‰²å™¨æ–‡æ¡£
â”‚
â””â”€â”€ é¡¹ç›®å¼€å‘æ—¥å¿—-2025-11-17.md  # æœ¬æ—¥å¿—æ–‡ä»¶
```

---

## ğŸ”„ æ¨¡å—è°ƒç”¨å…³ç³»å›¾

```
public/index.html
    â†“
src/index.js (ä¸»å…¥å£)
    â”œâ”€â”€â†’ jungleScene.js
    â”‚       â””â”€â”€â†’ pointCloudShader.js (meshToPointCloud)
    â”‚
    â”œâ”€â”€â†’ randomBird.js
    â”‚       â””â”€â”€â†’ pointCloudShader.js (createPointCloudSkin)
    â”‚
    â”œâ”€â”€â†’ pointCloudShader.js (updatePointCloudTime) [åŠ¨ç”»å¾ªç¯ä¸­]
    â”‚
    â””â”€â”€â†’ groundRingModel.js â­ ä»Šæ—¥æ–°å¢
            â””â”€â”€â†’ (loadGroundRingModel å¾…å®ç°)
```

---

## ğŸ“¦ æ¨¡å‹æ–‡ä»¶ç®¡ç†

### ä¸›æ—åœºæ™¯æ¨¡å‹ (`public/models/`)
- **ç”¨é€”**: ç”¨äºä¸›æ—åœºæ™¯ä¸­çš„æ‚ç‰©å †æ¨¡å‹
- **æ ¼å¼**: OBJ æ ¼å¼ï¼ˆå¾…å®ç°åŠ è½½ï¼‰
- **é…ç½®**: åœ¨ `src/index.js` ä¸­é€šè¿‡ `createJungleSceneGroup()` çš„ `modelPaths` å‚æ•°é…ç½®
- **åŠ è½½**: ç”± `jungleScene.js` çš„ `loadModel()` å‡½æ•°åŠ è½½ï¼ˆç›®å‰ä½¿ç”¨ç«‹æ–¹ä½“å ä½ï¼‰

### åœ°é¢åœ†ç¯æ¨¡å‹ (`public/models/`)
- **ç”¨é€”**: ç”¨äºåœ°é¢åœ†ç¯çš„è‡ªå®šä¹‰æ¨¡å‹
- **æ ¼å¼**: OBJã€GLTF ç­‰ï¼ˆå¾…å®ç°åŠ è½½ï¼‰
- **é…ç½®**: åœ¨ `src/index.js` ä¸­é€šè¿‡ `createGroundRingConfig()` é…ç½®
- **åŠ è½½**: ç”± `groundRingModel.js` çš„ `loadGroundRingModel()` å‡½æ•°åŠ è½½ï¼ˆå¾…å®ç°ï¼‰
- **ä½¿ç”¨æ–¹å¼**: 
  1. ç›´æ¥ä¼ å…¥ THREE.Object3D å¯¹è±¡
  2. åˆ†åˆ«æä¾›å†…åœ†å’Œå¤–åœ†æ¨¡å‹
  3. ä»æ–‡ä»¶åŠ è½½ï¼ˆå¾…å®ç°ï¼‰

---

## ğŸ¯ æ ¸å¿ƒå‚æ•°é…ç½®

### åœ†ç¯å‚æ•°ï¼ˆåœ¨ `src/index.js` ä¸­å®šä¹‰ï¼‰
```javascript
const INNER_RADIUS = 7.1 * 2.5;  // å°åœ†åŠå¾„ï¼š17.75
const OUTER_RADIUS = 14.2 * 2.5; // å¤§åœ†åŠå¾„ï¼š35.5
```

### åœºæ™¯å‚æ•°
- åœºæ™¯èƒŒæ™¯è‰²: `0xf9f6ec` (ç±³ç™½è‰²)
- é›¾æ•ˆæœ: `Fog(0xf9f6ec, 25, 52)`
- ä¸›æ—ç¼©æ”¾: `5å€` (åœ¨ `src/index.js` ä¸­è®¾ç½®)

---

## ğŸ“ æŠ€æœ¯æ ˆ

- **Three.js**: 3D å›¾å½¢åº“
- **WebGL**: æ¸²æŸ“å¼•æ“
- **JavaScript (ES6+)**: ç¼–ç¨‹è¯­è¨€
- **Webpack**: æ¨¡å—æ‰“åŒ…å·¥å…·ï¼ˆæ¨æµ‹ï¼‰

---

## ğŸ”§ å¾…å®ç°åŠŸèƒ½

1. **æ¨¡å‹åŠ è½½åŠŸèƒ½**
   - `jungleScene.js` ä¸­çš„ OBJ æ¨¡å‹åŠ è½½
   - `groundRingModel.js` ä¸­çš„æ¨¡å‹æ–‡ä»¶åŠ è½½

2. **å¼‚æ­¥å¤„ç†**
   - å°†æ¨¡å‹åŠ è½½ç›¸å…³å‡½æ•°æ”¹ä¸ºå¼‚æ­¥å‡½æ•°
   - å¤„ç†å¼‚æ­¥åŠ è½½çš„ç­‰å¾…å’Œé”™è¯¯å¤„ç†

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `public/models/README.md` - æ¨¡å‹æ›¿æ¢è¯´æ˜æ–‡æ¡£
- `docs/POINT_CLOUD_SHADER.md` - ç‚¹äº‘ç€è‰²å™¨æ–‡æ¡£

---

**æ—¥å¿—ç”Ÿæˆæ—¶é—´**: 2025-11-17

